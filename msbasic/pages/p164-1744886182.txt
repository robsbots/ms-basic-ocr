BASIC MCS 8080	GATES/ALLEN/DAVIDOFF	MACRO 47(113) 03:12 10-SEP-75 PAGE 30
F3	MAC	 6-SEP-64 03:11		PEEK AND POKE

  7762					49760	SUBTTL PEEK AND POKE
  7763					47980	IFN	LENGTH.<
  7764					48000	IFE	LENGTH-2,<
  7765	011314'	001000	000315		48020	PEEK:	CALL	FRCINT		;GET AN INTEGER IN [H,L]
  7766	001315'	000000	011025*			
  7767	001316'	000000	011311'		
  7768	001317'	001000	000176		48040		MOV	A,M>		;GET THE VALUE TO RETURN
  7769					48060	IFN	LENGTH-2,<
  7770					48080	PEEK:	CALL	POSINT		;GET THE VALUE TO RETURN
  7771					48100		LDAX	D>		;READ THE VALUE
  7772	011320'	001000	000303		48120		JMP	SNGFLT		;ABD FLOAT IT
  7773	011321'	000000	007400'
  7774	011322'	000000	011315'
  7775					48140	IFE	LENGTH-2,<
  7776	011323'	001000	000315		48160	POKE:	CALL	FRMEVL		
  7777	001324' 000000	005336'
  7778	011325'	000000	011321'
  7779	011326'	001000	000345		48180		PUSH	H		;SAVE THE TEXT POINTER
  7780	011327'	001000	000315		48200		CALL	FRCINT		;GET INTEGER FALUE OF FAC IN [H,L]
  7781	011330'	000000	011315*
  7782	001331'	000000	011325'
  7783	011332'	001000	000343		48220		XTHL>			;GET BACK THE TEXT POINTER
  7784					48240	IFN	LENGTH-2,<
  7785					48260	POKE:	CALL 	INTIO2		;READ LOCATION TO POKE
  7786					48280		PUSH 	D>		;SAVE THE LOCATION
  7787	011333'	001000	000317		48300		SYNCHK	44		;CHECK FOR A COMMA
  7788	011334'	000000	000054
  7789	011335'	001000	000315		48320		CALL	GETBYT
  7790	011336'	000000	011020'
  7791	011337'	000000	011330'
  7792	011340'	001000	000321		48340		POP	D		;GET THE ADDRESS BACK
  7793	011341'	001000	000022		48360		STAX	D		;STORE IT AWAY
  7794	011342'	001000	000311		48380		RET>			;SCANNED EVERYTHING
  7795					48400	;
  7796					48420	; NOTE: IN THE 8 K PEEK ONLY ACCEPTS POSITIVE NUMBERS UP TO 32767
  7797					48440	; POKE WILL ONLY TAKE AN ADDRESS UP TO 32767 , NO
  7798					48460	; FUDGING ALLOWED, THE VALUE IS UNSIGNED.
  7799					48480	;
  7800			011336'		48500	.C1=.P
  7801					48520	END
  
  NO ERRORS DETECTED
  
  PROGRAM BREAK IS 011343
  
  10K CORE USED
  
