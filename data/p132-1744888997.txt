BASIC MCS 8080 GATES/ALLEN/DAVIDOFF	MACRO 47(113) 03:12 10-SEP-75 PAGE 24-1
F3	MAC	6-SEP-64 03:11		FRE  FUNCTION AND INTEGER TO FLOATING ROUTINES
  6260					25900			MVI	B,144		;SETUP TO FLOAT [B,C]		
  6261					25920			JMP	FLOATR>
  6262					26120	IFE		LENGTH-2,<
  6263	007372'	001000	000175		26140	GIVDBL:		MOD	A,L		;[H,L]=[H,L]-[D,E]
  6264	007373'	001000	000223		26160			SUB	E
  6265	007374'	001000	000157		26180			MOV	L,A
  6266	007375'	001000	000174		26200			MOV	A,H
  6267	007376'	001000	000232		26220			SBB	D
  6268	007377'	001000	000021		26240			XWD	^D1000.^21	;SKIP THE NEXT TWO BYTES WITH "LXI D,"
  6269	007400'	001000	000175		26260	SNGFLT:		MOV	L,A		;MAKE [A] AN UNSIGNED INTEGER
  6270	007401'	001000	000257		26280			XRA	A
  6271	007402'	001000	000147		26300	GIVINIT:	MOV	H,A
  6272	007403'	001000	000303		26320			JMP	MAKINT>
  6273	007404'	000000	006471*
  6274	007405'	000000	0007370'
  6275					26322	INF		LENGTH,<
  6276					26324	INF		LPTSW,<
  6277					26326	LPOS:		LDA	LPTPOS
  6278					26328			JMP	SNGFLT>
  6279	007406'	001000	00072		26330	POS:		LDA	TTYPOS		;GET TELETYPE POSITION
  6280	007407'	000000	000047'
  6281	007410'	000000	007404'
  6282					26332	IFN		LENGTH-2,<
  6283					26334	SNGFLT:		MOV	B,A		;RETURN FLOATING 1 BYTE
  6284					26336			XRA	A		;UNSIGNED FROM A
  6285					26338			JMP	GIVABF>>	;GIVING 0-255
  6286	
  6287					26360	PAGE
  
